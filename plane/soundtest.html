<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Plane</title>
    <script src="lib/polyfill/Object.assign.js"></script>
    <script src="lib/polyfill/Array.prototype.forEach.js"></script>
    <script src="lib/linq.js"></script>
    <script src="lib/sound.js"></script>
    <script src="interface/IEventObject.js"></script>
    <script src="abstract/AEventObject.js"></script>
    <script src="Implement/resource.js"></script>
    <script src="Implement/dataBus.js"></script>
    <script src="abstract/AModel.js"></script>
    <script src="abstract/ABullet.js"></script>
    <script src="model/background.js"></script>
    <script src="model/bullet1.js"></script>
    <script src="model/bullet2.js"></script>
    <script src="model/plane.js"></script>
    <script src="abstract/AEnemy.js"></script>
    <script src="model/enemy1.js"></script>
    <script src="model/dialog.js"></script>
    <script src="model/text.js"></script>
    <script src="level/level1.js"></script>
    <script src="lib/keyboardListener.js"></script>
    <script src="lib/mouseListener.js"></script>
    <script src="Implement/game.js"></script>
</head>

<body style="margin:0;">
    <button id="btnBGM">BGM</button>
    <button id="btnBiu">biu</button>
    <script>
        dataBus.resource.list = [
            { key: "bg", src: "resource/resource.png" },
            { key: "number", src: "resource/number.png" },
            { key: "face", src: "resource/face.png" },
            { key: "common", src: "resource/common.png" },
            { key: "bgm", src: "resource/game_music.mp3" },
            { key: "bullet", src: "resource/bullet.mp3" },
            { key: "enemy1down", src: "resource/enemy1_down.mp3" },
            { key: "enemy2down", src: "resource/enemy2_down.mp3" },
            { key: "enemy2out", src: "resource/enemy2_out.mp3" },
            { key: "enemy3down", src: "resource/enemy3_down.mp3" },
            { key: "gameover", src: "resource/game_over.mp3" }
        ];

        function playBGM() {
            dataBus.sound.play("bgm");
        }

        function playBiu() {
            dataBus.sound.play("bullet");
        }

        setInterval(function () {
            playBiu();
        }, 1000);

        dataBus.resource.addEventListener("complete", function (evt) {
            dataBus.sound = new Sound(dataBus.resource.list);
        });
        dataBus.resource.loadAll();

        document.querySelector("#btnBGM").addEventListener("click", function (evt) {
            dataBus.sound.fixIOSCantPlay();
            playBGM();
        });

        document.querySelector("#btnBiu").addEventListener("click", function (evt) {
            playBiu();
        });
    </script>
</body>

</html>